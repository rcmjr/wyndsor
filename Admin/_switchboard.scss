@import "breakers.scss";

  //// 1 //////////// Connects to tools or to augmentations, filters into important or breakpoints
  @mixin lines($redline, $greenline, $var-name, $breakpoint, $importance-check, $important-check, $importance-check-wcomma, $important-check-wcomma, $EpicAct, $important-removal: false, $customprops-feature: false) {

    // Property Names
    $redline: to-list($redline, "keys");
    $redline-str: map-tostring($redline, ' ');

    // Property Values
    $greenline: to-string($greenline);

      // Important Runtime
      $greenline-clean: if(str-index($greenline, ", !important"), str-replace($greenline, ", !important", " !important"),
                        if(str-index($greenline, ", important"), str-replace($greenline, ", important", ""),
                        if(str-index($greenline, " important"), str-replace($greenline, " important", ""), $greenline)));

        // Important Warnings/Disables
        @if $important-check == true and $importance-check == true {
          @error "Sorry, in '#{$redline-str}', you shouldnt use both types of importance, try using only one.";
        }
        @if $Disable-ImportantRule == yes or $important-removal == true {
          $importance-check: false;
          $important-check: false;
          $importance-check-wcomma: false;
          $important-check-wcomma: false;
          $greenline-clean: if(str-index($greenline, ", !important"), str-replace($greenline, ", !important", ""),
                            if(str-index($greenline, " !important"), str-replace($greenline, " !important", ""),
                            if(str-index($greenline, ", important"), str-replace($greenline, ", important", ""),
                            if(str-index($greenline, " important"), str-replace($greenline, " important", ""), $greenline))));
        }

        // Custom Property Variables - Auto Individual Properties
        $custompropvar-check: if(str-index($greenline-clean, "#{" " + $sass-autovar}"), true, false);
        $custompropvarfull-check: if(str-index($greenline-clean, "#{" " + $sass-autovar + "-full"}"), true, false);
        $greenline-clean: if(str-index($greenline-clean, "#{" " + $sass-autovar + "-full"}"), str-replace($greenline-clean, "#{" " + $sass-autovar + "-full"}", ""),
                          if(str-index($greenline-clean, "#{", " + $sass-autovar}"), str-replace($greenline-clean, "#{", " + $sass-autovar}", ""),
                          if(str-index($greenline-clean, "#{" " + $sass-autovar}"), str-replace($greenline-clean, "#{" " + $sass-autovar}", ""), $greenline-clean)));

        // Custom Property Variables - Variable Names and Customprops Switches
        $var-name: str-replace(to-string($var-name), " ", "-");
        $customprops-fetch: if($customprops-feature == true or $customprops-feature == true-all or $customprops-feature == true-full, true, false);
        $redline-custompropname: if($customprops-fetch == true or $custompropvar-check == true, '--' + $var-name + '-' + $redline-str, "");
        $redline-customprop: if($customprops-fetch == true or $custompropvar-check == true, 'var(' + $redline-custompropname + ')', "");


    $greenline: if(type-of($greenline-clean) == 'string', str-to-list($greenline-clean), if(type-of($greenline-clean) == 'list', if($greenline-clean != (), to-list($greenline-clean, "keys"), ""), $greenline-clean));
    $greenline-list: remove-comma($greenline);
    $greenline-str: map-tostring($greenline-list, ' ');
    $greenline-length: length($greenline-list);

    $greenverb-prep: to-string(nth($greenline-list, 1));
    $greenverb-list: remove($greenline-list, $greenverb-prep, true);
    $greenverb-length: length($greenverb-list);
    $greenverb-str: map-tostring($greenverb-list, ' ');
    // Line Options:
    // - auto-val // Wyndsor's Value Automations
    // - custo-val // Your Custom Value Automations
    // - auto-quote // Keeps quote marks when composing to CSS
    // - auto-ven-val // Adds vendor prefixes to inner value
    // - auto-ven-prop // Adds vendor prefixes to outer property
    // - auto-type // Automatically converts font-size and generates line-height
    // - auto-prop // Wyndsor's Property Automations
    // - custo-prop // Your Property Automations

    //// 1 //////////// Wyndsor's Property Automations
    @include splitter($redline-str, $greenline-list, auto-prop) {
      $splitter: auto-prop;
      @if $customprops-feature == true-all {
        #{$redline-str}: #{$redline-customprop};
      }
      @else {
        @include simple-repeater($redline, $redline-str, $greenline-list, $greenline-str, $greenline-length, $splitter, $breakpoint, $EpicAct, $important-check);
        //@include graph-simple($redline, $redline-str, $greenverb-list, $greenverb-str, $greenverb-length, $splitter, $breakpoint, $EpicAct, $important-check);
      }
    }

    //// 2 //////////// Your Property Automations
    @include splitter($redline-str, $greenline-list, custo-prop) {
      $splitter: custo-prop;
      @if $customprops-feature == true-all {
        #{$redline-str}: #{$redline-customprop};
      }
      @else {
        @include crtrfone($redline, $redline-str, $greenverb-list, $greenverb-str, $greenverb-length, $splitter, $breakpoint, $EpicAct, $important-check);
      }
    }

    //// 3 //////////// Auto Vendor Prefixes
    @include splitter($redline-str, $greenline-list, auto-ven-prop) {

      @if $Enable-AVP == yes {
       @if $customprops-fetch == false {
          @each $prefix in $vprefixes {
            #{'-' + $prefix + '-' + $redline-str}: #{$greenline-str};
          }
          #{$redline-str}: #{$greenline-str};
        }
        @else if $customprops-fetch == true or $custompropvar-check == true {
          @if $custompropvarfull-check == true or $customprops-feature == true-full {
            #{$redline-custompropname}: #{$greenline-str};
          }
          @each $prefix in $vprefixes {
            #{'-' + $prefix + '-' + $redline-str}: #{$redline-customprop};
          }
          #{$redline-str}: #{$redline-customprop};
        }
      }
      @else {
        #{$redline-str}: #{$greenline-str};
      }
    }

    //// 4 //////////// Built-In Typography
    @include splitter($redline-str, $greenline-list, auto-type) {
      $greenline-list: remove($greenline-list, "!important", true);
      $greenline-str: if(str-index($greenline-str, "!important"), str-replace($greenline-str, "!important", ""), $greenline-str);
      $greenline-length: length($greenline-list);

      @if $Enable-ATG == yes {
        @if $customprops-fetch == false {
          @include sassline($redline, $redline-str, $greenline-list, $greenline-str, $greenline-length, $breakpoint, $EpicAct, $important-check);
        }
        @else if $customprops-fetch == true or $custompropvar-check == true {
          @if $redline-str == "font-size" {
            @if $custompropvarfull-check == true or $customprops-feature == true-full {
              #{$redline-custompropname}: #{$greenline-clean};
            }
            #{$redline-str}: #{$redline-customprop};
          }
          @else if $redline-str == unquote($sass-autotype) {
            font-size: #{unquote('var(--' + $var-name + '-font-size)')};
            line-height: #{unquote('var(--' + $var-name + '-line-height)')};
          }
        }
      }
      @else if $Enable-ATG == no {
       @if $customprops-fetch == false {
          @if $redline-str == "font-size" {
            #{$redline-str}: #{$greenline-clean};
          }
          @else if $redline-str == unquote($sass-autotype) {
            @include sassline($redline, $redline-str, $greenline-list, $greenline-str, $greenline-length, $breakpoint, $EpicAct, $important-check);
          }
        }
        @else if $customprops-fetch == true or $custompropvar-check == true {
          @if $redline-str == "font-size" {
            @if $custompropvarfull-check == true or $customprops-feature == true-full {
              #{$redline-custompropname}: #{$greenline-clean};
            }
            #{$redline-str}: #{$redline-customprop};
          }
          @else if $redline-str == unquote($sass-autotype) {
            font-size: #{unquote('var(--' + $var-name + '-font-size)')};
            line-height: #{unquote('var(--' + $var-name + '-line-height)')};
          }
        }
      }
    }

    //// 5 //////////// Value Automations
    @if ($greenline-length > 1) {

      // Wyndsor's Value Automations
      @include splitter($redline-str, $greenline-list, auto-val) {
        $splitter: auto-val;
        @if $customprops-feature == true-all {
          #{$redline-str}: #{$redline-customprop};
        }
        @else if $custompropvar-check == true {
          @error "Sorry, you cant use -var here.";
        }
        @else {
          @include color-tool($redline, $redline-str, $greenverb-list, $greenverb-str, $greenverb-length, $splitter, $breakpoint, $EpicAct, $important-check);
          @include pattern-tool-1($redline, $redline-str, $greenverb-list, $greenverb-str, $greenverb-length, $splitter, $breakpoint, $EpicAct, $important-check);
        }
      }

      // Your Value Automations
      @include splitter($redline-str, $greenline-list, custo-val) {
        $splitter: custo-val;
        @if $customprops-feature == true-all {
          #{$redline-str}: #{$redline-customprop};
        }
        @else if $custompropvar-check == true {
          @error "Sorry, you cant use -var here.";
        }
        @else {
          @include crtrfone($redline, $redline-str, $greenverb-list, $greenverb-str, $greenverb-length, $splitter, $breakpoint, $EpicAct, $important-check);
        }
      }

      // Inner vendor prefixes upon request
      @include splitter($redline-str, $greenline-list, auto-ven-val) {
        $important: unquote(if($important-check == true, " !important", ""));
        @if $customprops-fetch == true or $custompropvar-check == true {
          @each $prefix in $vprefixes {
            @if $custompropvarfull-check == true or $customprops-feature == true-full {
              #{'--' + $prefix + '-' + $var-name + '-' + $redline-str}: #{$greenverb-str};
            }
            #{$redline-str}: #{'var(--' + $prefix + '-' + $var-name + '-' + $redline-str + ')'};
          }
          @if $custompropvarfull-check == true or $customprops-feature == true-full {
            #{$redline-custompropname}: #{$greenverb-str};
          }
          #{$redline-str}:  #{$redline-customprop};
        }
        @else {
          @each $prefix in $vprefixes {
            #{$redline-str}: #{'-' + $prefix + '-' + $greenverb-str};
          }
          #{$redline-str}: #{$greenverb-str};
        }
      }
    }

    //// 6 //////////// Regular CSS
    @include splitter($redline-str, $greenline-list, regular) {
      @if $customprops-fetch == true or $custompropvar-check == true {
        @if $custompropvarfull-check == true or $customprops-feature == true-full {
          #{$redline-custompropname}: #{$greenline-clean};
        }
        #{$redline-str}: #{$redline-customprop};
      }
      @else {
        #{$redline-str}: #{$greenline-clean};
      }
    }
  }

  //// 2 //////////// Switches between regular and important/breakpoint CSS
  @mixin switch($EpicAct, $startkey, $startvalue, $var-name, $breakpoint, $importance-check, $important-check, $importance-check-wcomma, $important-check-wcomma, $customprops-feature: false, $breakpoint-override: false, $important-override: false, $override-brkname: null, $gm-override: false) {

    $property: to-string($startkey);
    $propvalue: to-string($startvalue);
    $important-removal: null;
    $redpill: null;
    $bluepill: null;
    $purplepill: null;

    @if $important-override == true {
      @if $EpicAct == important {
        $redpill: true;
        $bluepill: false;
        $purplepill: false;
        $important-removal: true;
      }
      @else {
        $redpill: false;
        $bluepill: false;
        $purplepill: false;
      }
    }
    @else if $breakpoint-override == true {
      @if $EpicAct == breakpoint {
        $redpill: false;
        $bluepill: true;
        $purplepill: false;
        $important-removal: true;
      }
      @else {
        $redpill: false;
        $bluepill: false;
        $purplepill: false;
      }
    }
    @else {
      @if $EpicAct == important and $importance-check == true {
        $redpill: true;
        $bluepill: false;
        $purplepill: false;
        $important-removal: true;
      }
      @if $EpicAct == normal and $importance-check == false {
        $redpill: false;
        $bluepill: false;
        $purplepill: true;
        $important-removal: false;
      }
    }
    @if $breakpoint-override == true and $importance-check == true {
      @warn "Heads up, Wyndsor always picks breakpoint overrides over importance, and '#{$startkey}' has an important rule under a breakpoint override.";
    }

    // For Regular CSS
    @include filterpoint(regular, $EpicAct, $redpill, $bluepill, $purplepill, $override-brkname, $breakpoint) {
      @include lines($property, $propvalue, $var-name, $breakpoint, $importance-check, $important-check, $importance-check-wcomma, $important-check-wcomma, $EpicAct, $important-removal, $customprops-feature);
    }
    // For Breakpoints and Important CSS
    @include filterpoint(full, $EpicAct, $redpill, $bluepill, $purplepill, $override-brkname, $breakpoint) {
      @include lines($property, $propvalue, $var-name, $breakpoint, $importance-check, $important-check, $importance-check-wcomma, $important-check-wcomma, $EpicAct, $important-removal, $customprops-feature);
    }
  }

  //// 3 //////////// Routes acceptable connections through to the switches/lines
  @mixin router($property, $propertyvalue, $value, $key, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override: false, $important-override: false, $override-brkname: null, $gm-override: false, $gm-override-2: false) {

    $aliasnames: ();
    $property: to-string($property);
    $propvalue: to-string($propertyvalue);
    $off: off;

    // For CSS Properties
    @include brker ($property, regular) {

      $baseORbreak-check: if(type-of($propertyvalue) == "map", true, false);

      @if $baseORbreak-check == false {
        $importance-check: if(str-index(to-string($propertyvalue), " important"), true, false);
        $important-check: if(str-index(to-string($propertyvalue), " !important"), true, false);
        $importance-check-wcomma: if(str-index(to-string($propertyvalue), ", important"), true, false);
        $important-check-wcomma: if(str-index(to-string($propertyvalue), ", !important"), true, false);

        @include switch($EpicAct, $property, $propertyvalue, $var-name, $breakpoint, $importance-check, $important-check, $importance-check-wcomma, $important-check-wcomma, $customprops-feature, $breakpoint-override, $important-override, $override-brkname);
      }
      @else if $baseORbreak-check == true {
        @each $key, $value in $propertyvalue {
          $base-filter: if($key == "base", true, false);
          $break-filter: if($key == $breakpoint, true, false);

          $propertyvalue: to-string($value);

          $importance-check: if(str-index(to-string($propertyvalue), " important"), true, false);
          $important-check: if(str-index(to-string($propertyvalue), " !important"), true, false);
          $importance-check-wcomma: if(str-index(to-string($propertyvalue), ", important"), true, false);
          $important-check-wcomma: if(str-index(to-string($propertyvalue), ", !important"), true, false);

          @if $base-filter == true {
            @include switch($EpicAct, $property, $propertyvalue, $var-name, $breakpoint, $importance-check, $important-check, $importance-check-wcomma, $important-check-wcomma, $customprops-feature, $breakpoint-override, $important-override, $override-brkname);
          }
          @else if $break-filter == true and $EpicAct == breakpoint {
            @if $Scope-BreakpointOverride == all {
              @if $breakpoint-override == true {
                $override-brkname: $override-brkname;
              }
              @else {
                $override-brkname: $breakpoint;
                $breakpoint-override: true;
              }
            }
            @else if $Scope-BreakpointOverride == norm {
              $override-brkname: $breakpoint;
              $breakpoint-override: true;
            }
            $var-name: $var-name + "-" + $breakpoint;
            @include switch($EpicAct, $property, $propertyvalue, $var-name, $breakpoint, $importance-check, $important-check, $importance-check-wcomma, $important-check-wcomma, $customprops-feature, $breakpoint-override, $important-override, $override-brkname);
          }
        }
      }

    }

    // For Pseudos
    @include brker ($property, pseudo) {
      $var-name: append($var-name, ps, space);
      //// ℹ︎ //////////// Forces the router to compile to the important section or a specific breakpoint.
      @if $Enable-Overrides == yes and $gm-override == false {
        // Overrides
        $important-override: if(remove-duplicates(purge(chk-override($propertyvalue, important))) == (), false, true);
        $breakpoint-override: if(remove-duplicates(purge(chk-override($propertyvalue, breakpoint))) == (), false, true);
        $brkname-override: remove-duplicates(purge(chk-override($propertyvalue, breakpoint-name)));
        $override-brkname: if($brkname-override != (), to-string(list-first($brkname-override)), null);
        $gm-override: if(remove-duplicates(purge(chk-override($propertyvalue, override-all))) == (), false, true);
      }
      @if $Enable-Features == yes and $gm-override-2 == false {
        // Enables
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property, enables))) == (), false, true);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-all, enables))) == (), $customprops-feature, true-all);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-full, enables))) == (), $customprops-feature, true-full);
        $gm-override-2: if(remove-duplicates(purge(chk-override($propertyvalue, override-all, enables))) == (), false, true);
      }
      @each $subprop, $subpropval in $propertyvalue {
        @include brker ($subprop, regular) {
          @include router($subprop, $subpropval, $propertyvalue, null, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override, $important-override, $override-brkname, $gm-override, $gm-override-2);
        }
        @include brker ($subprop, child, inner) {
          @include router($subprop, $subpropval, $propertyvalue, null, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override, $important-override, $override-brkname, $gm-override, $gm-override-2);
        }
      }
    }

    // For Sub-classes
    @include brker ($property, subclass) {
      $var-name: append($var-name, sc, space);
      //// ℹ︎ //////////// Forces the router to compile to the important section or a specific breakpoint.
      @if $Enable-Overrides == yes and $gm-override == false {
        // Overrides
        $important-override: if(remove-duplicates(purge(chk-override($propertyvalue, important))) == (), false, true);
        $breakpoint-override: if(remove-duplicates(purge(chk-override($propertyvalue, breakpoint))) == (), false, true);
        $brkname-override: remove-duplicates(purge(chk-override($propertyvalue, breakpoint-name)));
        $override-brkname: if($brkname-override != (), to-string(list-first($brkname-override)), null);
        $gm-override: if(remove-duplicates(purge(chk-override($propertyvalue, override-all))) == (), false, true);
      }
      @if $Enable-Features == yes and $gm-override-2 == false {
        // Enables
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property, enables))) == (), false, true);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-all, enables))) == (), $customprops-feature, true-all);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-full, enables))) == (), $customprops-feature, true-full);
        $gm-override-2: if(remove-duplicates(purge(chk-override($propertyvalue, override-all, enables))) == (), false, true);
      }
      @each $subprop, $subpropval in $propertyvalue {
        @include brker ($subprop, regular) {
          @include router($subprop, $subpropval, $propertyvalue, null, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override, $important-override, $override-brkname, $gm-override, $gm-override-2);
        }
        @include brker ($subprop, pseudo, inner) {
          @include router($subprop, $subpropval, $propertyvalue, null, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override, $important-override, $override-brkname, $gm-override, $gm-override-2);
        }
      }
    }

    // For Namespaces
    @include brker ($property, namespace) {
      $var-name: append($var-name, nm, space);
      //// ℹ︎ //////////// Forces the router to compile to the important section or a specific breakpoint.
      @if $Enable-Overrides == yes and $gm-override == false {
        // Overrides
        $important-override: if(remove-duplicates(purge(chk-override($propertyvalue, important))) == (), false, true);
        $breakpoint-override: if(remove-duplicates(purge(chk-override($propertyvalue, breakpoint))) == (), false, true);
        $brkname-override: remove-duplicates(purge(chk-override($propertyvalue, breakpoint-name)));
        $override-brkname: if($brkname-override != (), to-string(list-first($brkname-override)), null);
        $gm-override: if(remove-duplicates(purge(chk-override($propertyvalue, override-all))) == (), false, true);
      }
      @if $Enable-Features == yes and $gm-override-2 == false {
        // Enables
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property, enables))) == (), false, true);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-all, enables))) == (), $customprops-feature, true-all);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-full, enables))) == (), $customprops-feature, true-full);
        $gm-override-2: if(remove-duplicates(purge(chk-override($propertyvalue, override-all, enables))) == (), false, true);
      }
      @each $subprop, $subpropval in $propertyvalue {
        @include brker ($subprop, regular) {
          @include router($subprop, $subpropval, $propertyvalue, null, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override, $important-override, $override-brkname, $gm-override, $gm-override-2);
        }
      }
    }

    // For Children
    @include brker ($property, child) {
      $var-name: append($var-name, ch, space);
      //// ℹ︎ //////////// Forces the router to compile to the important section or a specific breakpoint.
      @if $Enable-Overrides == yes and $gm-override == false {
        // Overrides
        $important-override: if(remove-duplicates(purge(chk-override($propertyvalue, important))) == (), false, true);
        $breakpoint-override: if(remove-duplicates(purge(chk-override($propertyvalue, breakpoint))) == (), false, true);
        $brkname-override: remove-duplicates(purge(chk-override($propertyvalue, breakpoint-name)));
        $override-brkname: if($brkname-override != (), to-string(list-first($brkname-override)), null);
        $gm-override: if(remove-duplicates(purge(chk-override($propertyvalue, override-all))) == (), false, true);
      }
      @if $Enable-Features == yes and $gm-override-2 == false {
        // Enables
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property, enables))) == (), false, true);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-all, enables))) == (), $customprops-feature, true-all);
        $customprops-feature: if(remove-duplicates(purge(chk-override($propertyvalue, custom-property-full, enables))) == (), $customprops-feature, true-full);
        $gm-override-2: if(remove-duplicates(purge(chk-override($propertyvalue, override-all, enables))) == (), false, true);
      }
      // Put child-name mixin back here if it doesn't work in the brker mixin
      @each $subprop, $subpropval in $propertyvalue {
        $subhands: to-string($subprop);
          @include router($subprop, $subpropval, $propertyvalue, null, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override, $important-override, $override-brkname, $gm-override, $gm-override-2);
      }
    }
  }

  //// --- 4 - THE SWITCHBOARD --- ////////////////////////////
  @mixin switchboard($AlphaMap, $EpicAct, $breakpoint: null) {          //// 1 //////////// Creates mixin name and required variables.
                                                                        //
      @each $key, $value in $AlphaMap {                                 /////// a ///////// Breaks apart all of the first level keys and values from the Epic-Map.
                                                                        //
          $key-string: to-string($key);                                 // i -- Ensures the $key is a string.
          $type: null;
          $var-name: ();                                             // i -- Just enabling all the variables to work outside all conditions.
          $aliasnames: ();                                              //
          $aliasname: null;                                             //
          $exist-alias: null;                                           //
          $exist-html: null;
          $customfeatures: ();                                          //
                                                                        //
            @if if(str-index($key-string, '#'), true, false) {          //// 2 //////////// This "if, else" checks each key for an identifier
              $type: "#";
              $var-name: append($var-name, id, space);                                               /////// a ///////// CSS ID identifier
            }                                                         //                                                         //
            @else if chk-list($html-elements, $key) {                   /////// c ///////// CSS HTML identifier
              $type: "";                                                //
              $exist-html: true;
              $var-name: append($var-name, html, space);                                       //
            }
            @else if if(str-index($key-string, '+'), true, false) {          //// 2 //////////// This "if, else" checks each key for an identifier
              @error "Sorry, Namespaces aren`t allowed at this level. Trying creating a Class/ID then a Namespace.";                                              /////// a ///////// CSS ID identifier
            }                                                             //
            @else {                                                     /////// d ///////// CSS Class identifier
              $type: ".";
              $var-name: append($var-name, class, space);                                              //
            }
            $prename: if(str-index($key-string, '#'), str-replace($key, '#', ''), $key-string);
            $mainname: $type + $prename;
            $brkname: if($EpicAct == breakpoint, unquote('-' + $breakpoint), '');
            $aliasnames-str: null;
            $aliasnames-list2: null;
            $aliasbrk: if($EpicAct == breakpoint and $Include-AliasBrkname == yes, unquote('-' + $breakpoint), '');

            @each $property, $propertyvalue in $value {
              $exist-alias: chk-list($property, $sass-alterego);
              @if $exist-alias == true {
                @for $i from 1 through length($propertyvalue) {
                  $propval: if($propertyvalue != (), nth($propertyvalue, $i), "nope");
                  @if $propval != "nope" {
                    @if if(str-index($propval, '#'), true, false) {
                      $aliasnames: append($aliasnames, #{$propval}#{$aliasbrk}, comma);
                    }
                    @else if if(str-index($propval, '+'), true, false) {
                      @error "Sorry, you can`t create a Namespace this way, trying creating a class or ID first.";
                    }
                    @else if chk-list($html-elements, $propval) {
                      @error "Sorry, you can`t use '#{$propval}' as an alias.";
                    }
                    @else {
                      $aliasnames: append($aliasnames, #{unquote(".")}#{$propval}#{$aliasbrk}, comma);
                    }
                  }
                  @else if $propval == "nope" {
                    $aliasnames: ();
                    @error "You should go ahead and remove the alias field from #{$mainname}`s map.";
                  }
                }
              }
            }
            $var-name: append($var-name, $prename, space);
            $aliasname: if($aliasnames != (), $aliasnames, unquote(''));


        //// 2 //////////// Creates the classes, ids, subclasses and pseudos
        #{if($exist-html == true, $mainname, $mainname)}#{if($aliasname != null, unquote(', '), '')}#{if($aliasname != '', $aliasname, '')} {

          //// ℹ︎ //////////// Forces the switchboard to compile to the important section or a specific breakpoint.
          $important-override: false !default;
          $breakpoint-override: false !default;
          $override-brkname: null;
          $customprops-feature: false !default;
          $gm-override: false !default;
          $gm-override-2: false !default;

          @if $Enable-Overrides == yes {
            // Overrides
            $important-override: if(remove-duplicates(purge(chk-override($value, important))) == (), false, true);
            $breakpoint-override: if(remove-duplicates(purge(chk-override($value, breakpoint))) == (), false, true);
            $brkname-override: remove-duplicates(purge(chk-override($value, breakpoint-name)));
            $override-brkname: if($brkname-override != (), to-string(list-first($brkname-override)), null);
            $gm-override: if(remove-duplicates(purge(chk-override($value, override-all))) == (), false, true);
          }
          @if $Enable-Features == yes {
            // Enables
            $customprops-feature: if(remove-duplicates(purge(chk-override($value, custom-property, enables))) == (), false, true);
            $customprops-feature: if(remove-duplicates(purge(chk-override($value, custom-property-all, enables))) == (), $customprops-feature, true-all);
            $customprops-feature: if(remove-duplicates(purge(chk-override($value, custom-property-full, enables))) == (), $customprops-feature, true-full);
            $gm-override-2: if(remove-duplicates(purge(chk-override($value, override-all, enables))) == (), false, true);
          }

          //// a //////////// Pushes specified class/id to the important section or breakpoint.
          @each $property, $propertyvalue in $value {
            @include router($property, $propertyvalue, $value, $mainname, $var-name, $breakpoint, $EpicAct, $customprops-feature, $breakpoint-override, $important-override, $override-brkname, $gm-override, $gm-override-2);
          }
        }
      }
    }

  //// --- 5 - BREAKPOINT GENERATOR --- ////////////////////////////
  @mixin breakpointboard($AlphaMap, $EpicAct) {             //// 1 //////////// Creates mixin name and required variables.
    @each $break, $breakvalues in $breakpoints {            /////// a ///////// Breaks apart all of the breakpoint names and specs so the switchboard can run for each one in the list.
      @include brkpoint($breakvalues) {                     /////// b ///////// Runs the Breakpoint Auto-Code
        @include switchboard($AlphaMap, $EpicAct, $break);  /////// c ///////// Starts the Switchboard
      }
    }
  }
